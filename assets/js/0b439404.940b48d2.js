"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[6613],{7893:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"getting-started/code-snippets/using_nginx_server_to_protect_your_uploads_directory","title":"Using NGINX server to protect your upload directory","description":"If you using NGINX server for your site along with X-Accel-Redirect/X-Sendfile or Force Downloads download method, it is necessary that you add this configuration for better security:","source":"@site/../getting-started/code-snippets/using_nginx_server_to_protect_your_uploads_directory.md","sourceDirName":"getting-started/code-snippets","slug":"/getting-started/code-snippets/using_nginx_server_to_protect_your_uploads_directory","permalink":"/docs-playground/docs/getting-started/code-snippets/using_nginx_server_to_protect_your_uploads_directory","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/trunk/docs/../getting-started/code-snippets/using_nginx_server_to_protect_your_uploads_directory.md","tags":[{"inline":true,"label":"code-snippet","permalink":"/docs-playground/docs/tags/code-snippet"}],"version":"current","frontMatter":{"post_title":"Using NGINX server to protect your upload directory","sidebar_label":"NGINX server to protect upload directory","tags":["code-snippet"],"current wccom url":"https://woocommerce.com/document/digital-downloadable-product-handling/#protecting-your-uploads-directory"},"sidebar":"tutorialSidebar","previous":{"title":"Useful core functions","permalink":"/docs-playground/docs/getting-started/code-snippets/useful-functions"},"next":{"title":"Extension development","permalink":"/docs-playground/docs/getting-started/extension-development/"}}');var n=t(4848),s=t(8453);const c={post_title:"Using NGINX server to protect your upload directory",sidebar_label:"NGINX server to protect upload directory",tags:["code-snippet"],"current wccom url":"https://woocommerce.com/document/digital-downloadable-product-handling/#protecting-your-uploads-directory"},i="Using NGINX server to protect your upload directory",d={},a=[];function l(e){const o={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.header,{children:(0,n.jsx)(o.h1,{id:"using-nginx-server-to-protect-your-upload-directory",children:"Using NGINX server to protect your upload directory"})}),"\n",(0,n.jsxs)(o.p,{children:["If you using NGINX server for your site along with ",(0,n.jsx)(o.strong,{children:"X-Accel-Redirect/X-Sendfile"})," or ",(0,n.jsx)(o.strong,{children:"Force Downloads"})," download method, it is necessary that you add this configuration for better security:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-php",children:'# Protect WooCommerce upload folder from being accessed directly.\n# You may want to change this config if you are using "X-Accel-Redirect/X-Sendfile" or "Force Downloads" method for downloadable products.\n# Place this config towards the end of "server" block in NGINX configuration.\nlocation ~* /wp-content/uploads/woocommerce_uploads/ {\n    if ( $upstream_http_x_accel_redirect = "" ) {\n        return 403;\n    }\n    internal;\n}\n'})}),"\n",(0,n.jsxs)(o.p,{children:["And this the configuration in case you are using ",(0,n.jsx)(o.strong,{children:"Redirect only"})," download method:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-php",children:'# Protect WooCommerce upload folder from being accessed directly.\n# You may want to change this config if you are using "Redirect Only" method for downloadable products.\n# Place this config towards the end of "server" block in NGINX configuration.\nlocation ~* /wp-content/uploads/woocommerce_uploads/ {\n    autoindex off;\n}\n'})}),"\n",(0,n.jsx)(o.p,{children:"If you do not know which web server you are using, please reach out to your host along with a link to this support page."})]})}function u(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,o,t)=>{t.d(o,{R:()=>c,x:()=>i});var r=t(6540);const n={},s=r.createContext(n);function c(e){const o=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),r.createElement(s.Provider,{value:o},e.children)}}}]);